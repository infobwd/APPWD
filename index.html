<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
  <title>WD School Portal ‚Äî Phase 3</title>
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#9CC5FF">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme:{
        extend:{
          fontFamily:{ sans:['Kanit','system-ui','sans-serif'] },
          colors:{ base:'#0E1320', card:'#121A2E', prim:'#9CC5FF', primSoft:'#EAF3FF', warn:'#FFF1A6' }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;700&display=swap">
  <style>
    html,body{height:100%;background:#0E1320;color:#E7F0FF}
    .hide{display:none!important}
    .card{background:#121A2E;border:1px solid #223052;border-radius:20px}
    .chip{padding:.25rem .6rem;border:1px solid #223052;border-radius:999px;font-size:.75rem;background:#0E1320}
    .btn{display:inline-flex;align-items:center;gap:.5rem;padding:.55rem 1rem;border-radius:999px;border:1px solid #223052;background:#16203A}
    .btn-prim{background:linear-gradient(0deg,#122447,#162F5A);border-color:#2E4373;box-shadow:0 6px 16px rgba(156,197,255,.15)}
    .banner-grad{background:linear-gradient(135deg,#9CC5FF 0%, #FFF1A6 100%);}
    @media (min-width:1024px){.layout{display:grid;grid-template-columns:280px 1fr;gap:1.2rem}.sidebar{display:block}.bottom-nav{display:none}}
    @media (max-width:1023px){.layout{display:grid;grid-template-columns:1fr;gap:1.2rem}.sidebar{display:none}.bottom-nav{display:flex}}
  </style>
</head>
<body class="font-sans">
  <div class="banner-grad">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center gap-3">
      <div class="w-10 h-10 rounded-xl bg-white/25 grid place-items-center text-sm font-bold">WD</div>
      <div class="flex-1">
        <div class="text-base lg:text-lg font-semibold">WD School Portal</div>
        <div class="text-xs text-black/70">Phase 3 ‚Ä¢ Pastel Blue/Yellow ‚Ä¢ LIFF Login</div>
      </div>
      <div id="userBox" class="flex items-center gap-2">
        <button id="btnLineLogin" class="btn btn-prim">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ LINE</button>
        <div id="userInfo" class="hide chip bg-white/20 text-black">‚Äî</div>
        <button id="btnLogout" class="hide btn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
      </div>
    </div>
  </div>

  <main class="max-w-7xl mx-auto px-4 py-4 layout">
    <aside class="sidebar">
      <nav class="card p-3">
        <div class="text-sm uppercase text-slate-300 mb-2 px-2">‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</div>
        <ul class="space-y-1">
          <li><a class="navlink block px-3 py-2 rounded-lg hover:bg-[#0F1B34]" data-nav="#home">üè† ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a></li>
          <li><a class="navlink block px-3 py-2 rounded-lg hover:bg-[#0F1B34]" data-nav="#helpdesk">üÜò Helpdesk/‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a></li>
          <li><a class="navlink block px-3 py-2 rounded-lg hover:bg-[#0F1B34]" data-nav="#polls">üìä Polls & Forms</a></li>
          <li><a class="navlink block px-3 py-2 rounded-lg hover:bg-[#0F1B34]" data-nav="#directory">üë• ‡∏ó‡∏≥‡πÄ‡∏ô‡∏µ‡∏¢‡∏ö‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£</a></li>
        </ul>
      </nav>
    </aside>

    <section id="viewports" class="space-y-6">
      <div class="viewport" data-view="#home">
        <div class="card p-4">
          <div class="text-lg font-semibold mb-2">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö (Phase 3)</div>
          <div class="text-sm opacity-80">‡∏ò‡∏µ‡∏°‡∏û‡∏≤‡∏™‡πÄ‡∏ó‡∏• + LIFF Login + Helpdesk/Polls/Directory + PWA</div>
        </div>
      </div>

      <div class="viewport hide" data-view="#helpdesk">
        <div class="grid lg:grid-cols-3 gap-6">
          <div class="card p-4">
            <div class="text-lg font-semibold mb-2">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á/‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤</div>
            <form id="ticketForm" class="grid gap-3 text-sm">
              <label class="flex flex-col gap-1"><span>‡∏´‡∏°‡∏ß‡∏î</span>
                <select name="category" class="bg-[#091124] border border-[#223052] rounded p-2">
                  <option>IT</option><option>‡∏û‡∏±‡∏™‡∏î‡∏∏/‡∏ã‡πà‡∏≠‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á</option><option>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</option><option>‡∏ß‡∏¥‡∏ô‡∏±‡∏¢‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</option><option>‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£/‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô</option>
                </select>
              </label>
              <label class="flex flex-col gap-1"><span>‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠</span><input name="title" required class="bg-[#091124] border border-[#223052] rounded p-2"></label>
              <label class="flex flex-col gap-1"><span>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</span><textarea name="detail" rows="4" class="bg-[#091124] border border-[#223052] rounded p-2"></textarea></label>
              <label class="flex flex-col gap-1"><span>‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ/‡πÑ‡∏ü‡∏•‡πå</span><input name="file" type="file" class="text-xs"></label>
              <button class="btn btn-prim">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á</button>
            </form>
          </div>
          <div class="lg:col-span-2 card p-4">
            <div class="flex items-center justify-between">
              <div class="text-lg font-semibold">‡∏Ñ‡∏≥‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</div>
              <div class="text-xs chip bg-primSoft text-[#102548]" id="ticketCounter">‚Äî</div>
            </div>
            <div id="myTickets" class="mt-3 grid gap-3"></div>
          </div>
        </div>
      </div>

      <div class="viewport hide" data-view="#polls">
        <div class="card p-4">
          <div class="flex items-center justify-between">
            <div class="text-lg font-semibold">‡πÇ‡∏´‡∏ß‡∏ï/‡πÅ‡∏ö‡∏ö‡∏™‡∏≠‡∏ö‡∏ñ‡∏≤‡∏°</div>
            <a id="btnNewPoll" class="btn btn-prim" style="display:none">+ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏´‡∏ß‡∏ï</a>
          </div>
          <div id="pollList" class="mt-3 grid lg:grid-cols-2 gap-4"></div>
        </div>
      </div>

      <div class="viewport hide" data-view="#directory">
        <div class="card p-4">
          <div class="text-lg font-semibold mb-3">‡∏ó‡∏≥‡πÄ‡∏ô‡∏µ‡∏¢‡∏ö‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£</div>
          <div class="flex gap-2 mb-3">
            <input id="dirQuery" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠/‡πÅ‡∏ú‡∏ô‡∏Å/‡πÄ‡∏ö‡∏≠‡∏£‡πå" class="flex-1 bg-[#091124] border border-[#223052] rounded p-2">
            <button id="dirSearch" class="btn">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
          </div>
          <div id="dirGrid" class="grid md:grid-cols-3 gap-3"></div>
        </div>
      </div>
    </section>
  </main>

  <nav class="bottom-nav fixed bottom-0 inset-x-0 bg-[#0E1320]/95 border-t border-[#223052]">
    <div class="max-w-7xl mx-auto grid grid-cols-4">
      <button class="py-2 navbtn flex flex-col items-center text-base" data-nav="#home"><div class="text-2xl">üè†</div><div class="text-[12px] mt-0.5">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</div></button>
      <button class="py-2 navbtn flex flex-col items-center text-base" data-nav="#helpdesk"><div class="text-2xl">üÜò</div><div class="text-[12px] mt-0.5">Help</div></button>
      <button class="py-2 navbtn flex flex-col items-center text-base" data-nav="#polls"><div class="text-2xl">üìù</div><div class="text-[12px] mt-0.5">‡πÇ‡∏´‡∏ß‡∏ï</div></button>
      <button class="py-2 navbtn flex flex-col items-center text-base" data-nav="#directory"><div class="text-2xl">üë•</div><div class="text-[12px] mt-0.5">‡∏ó‡∏≥‡πÄ‡∏ô‡∏µ‡∏¢‡∏ö</div></button>
    </div>
  </nav>

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script type="module" src="./liff-bridge.js"></script>
  <script type="module" src="./app.js"></script>
  <script>
    if('serviceWorker' in navigator){ navigator.serviceWorker.register('./sw.js'); }
  </script>
</body>
</html>
